# üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets –¥–ª—è MarketingBot v3.2

## –û–±–∑–æ—Ä

MarketingBot v3.2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Google Sheets –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –æ–±—Ä–∞—â–µ–Ω–∏–π –∏ –∞–∫—Ü–∏–π. –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Google Sheets, –≤–∫–ª—é—á–∞—è Service Account –∏ Google Apps Script –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Cloud Platform

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ GCP

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ó–∞–ø–æ–º–Ω–∏—Ç–µ Project ID

### 2. –í–∫–ª—é—á–µ–Ω–∏–µ Google Sheets API

1. –í Google Cloud Console –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** ‚Üí **Library**
2. –ù–∞–π–¥–∏—Ç–µ "Google Sheets API"
3. –ù–∞–∂–º–∏—Ç–µ **Enable**

### 3. –°–æ–∑–¥–∞–Ω–∏–µ Service Account

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **IAM & Admin** ‚Üí **Service Accounts**
2. –ù–∞–∂–º–∏—Ç–µ **Create Service Account**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
   - **Name**: `marketingbot-sa`
   - **Description**: `Service Account for MarketingBot`
4. –ù–∞–∂–º–∏—Ç–µ **Create and Continue**
5. –†–æ–ª—å: **Editor** (–∏–ª–∏ –±–æ–ª–µ–µ —É–∑–∫–∞—è ‚Äî —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø –∫ Sheets)
6. –ù–∞–∂–º–∏—Ç–µ **Done**

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JSON –∫–ª—é—á–∞

1. –ù–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π Service Account –≤ —Å–ø–∏—Å–∫–µ
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ email –∞–∫–∫–∞—É–Ω—Ç–∞
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Keys**
4. –ù–∞–∂–º–∏—Ç–µ **Add Key** ‚Üí **Create new key**
5. –í—ã–±–µ—Ä–∏—Ç–µ **JSON** –∏ –Ω–∞–∂–º–∏—Ç–µ **Create**
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π JSON —Ñ–∞–π–ª

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ Google Sheet —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏:

| –ö–æ–ª–æ–Ω–∫–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|----------|---------|
| A | –ö–æ–¥ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä | 111098 |
| B | –¢–µ–ª–µ—Ñ–æ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–∞ | –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ | 89827701055 |
| C | –§–ò–û –ø–∞—Ä—Ç–Ω–µ—Ä–∞ | –ü–æ–ª–Ω–æ–µ –∏–º—è | –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á |
| D | –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | –°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–∞ | –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω |
| E | Telegram ID | ID –≤ Telegram | 123456789 |
| F | –î–∞—Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | 09.10.2025 15:30 |

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã** –∏–∑ URL: `https://docs.google.com/spreadsheets/d/<SHEET_ID>/edit`

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –æ–±—Ä–∞—â–µ–Ω–∏–π

–°–æ–∑–¥–∞–π—Ç–µ Google Sheet —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏:

| –ö–æ–ª–æ–Ω–∫–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|----------|---------|
| A | –ö–æ–¥ –ø–∞—Ä—Ç–Ω–µ—Ä–∞ | –°–≤—è–∑—å —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π | 111098 |
| B | –¢–µ–ª–µ—Ñ–æ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä–∞ | –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | 89827701055 |
| C | –§–ò–û –ø–∞—Ä—Ç–Ω–µ—Ä–∞ | –ü–æ–ª–Ω–æ–µ –∏–º—è | –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á |
| D | Telegram ID | ID –≤ Telegram | 123456789 |
| E | –¢–µ–∫—Å—Ç –æ–±—Ä–∞—â–µ–Ω–∏–π | –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ü—Ä–∏–≤–µ—Ç! |
| F | –°—Ç–∞—Ç—É—Å | –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞—â–µ–Ω–∏—è | –ù–æ–≤–æ–µ, –í —Ä–∞–±–æ—Ç–µ, –†–µ—à–µ–Ω–æ |
| G | –û—Ç–≤–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ | –û—Ç–≤–µ—Ç—ã —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ | –°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! |
| H | –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è | Timestamp | 09.10.2025 15:30 |

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã** –∏–∑ URL.

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∞–∫—Ü–∏–π

–°–æ–∑–¥–∞–π—Ç–µ Google Sheet —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏:

| –ö–æ–ª–æ–Ω–∫–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|----------|---------|
| A | –î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞ | –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ | 05.10.2025 |
| B | –ù–∞–∑–≤–∞–Ω–∏–µ | –ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏ | –°–∫–∏–¥–∫–∞ 20% –Ω–∞ –≤—Å–µ —É—Å–ª—É–≥–∏ |
| C | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ | –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ |
| D | –°—Ç–∞—Ç—É—Å | –°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ | –ê–∫—Ç–∏–≤–Ω–∞, –û–∂–∏–¥–∞–µ—Ç, –ó–∞–∫–æ–Ω—á–µ–Ω–∞ |
| E | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –∞–∫—Ü–∏–∏ | 05.10.2025 |
| F | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è | –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞–∫—Ü–∏–∏ | 31.10.2025 |
| G | –ö–æ–Ω—Ç–µ–Ω—Ç | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç | 123 |
| H | –î–µ–π—Å—Ç–≤–∏–µ | –ö–Ω–æ–ø–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ | –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å |

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã** –∏–∑ URL.

### 4. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ Service Account

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—É—é —Å–æ–∑–¥–∞–Ω–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
2. –ù–∞–∂–º–∏—Ç–µ **Share** (–ü–æ–¥–µ–ª–∏—Ç—å—Å—è)
3. –í—Å—Ç–∞–≤—å—Ç–µ email Service Account (–∏–∑ JSON —Ñ–∞–π–ª–∞)
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: **Editor**
5. –ù–∞–∂–º–∏—Ç–µ **Send**

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç A: JSON –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –í —Ñ–∞–π–ª–µ .env
GCP_SA_JSON={"type":"service_account","project_id":"your-project",...}
SHEET_ID=your_authorization_sheet_id
APPEALS_SHEET_ID=your_appeals_sheet_id
PROMOTIONS_SHEET_ID=your_promotions_sheet_id
```

### –í–∞—Ä–∏–∞–Ω—Ç B: JSON —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ

```bash
# –í —Ñ–∞–π–ª–µ .env
GCP_SA_FILE=/path/to/your/service-account.json
SHEET_ID=your_authorization_sheet_id
APPEALS_SHEET_ID=your_appeals_sheet_id
PROMOTIONS_SHEET_ID=your_promotions_sheet_id
```

## ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Apps Script –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### 1. –û—Ç–∫—Ä—ã—Ç–∏–µ Apps Script

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –∞–∫—Ü–∏–π
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è** ‚Üí **Apps Script**

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–¥–∞

1. –£–¥–∞–ª–∏—Ç–µ –≤–µ—Å—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ `docs/GOOGLE_APPS_SCRIPT_CODE.js`
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä Apps Script

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞:

```javascript
const CONFIG = {
  // URL –≤–∞—à–µ–≥–æ webhook —Å–µ—Ä–≤–µ—Ä–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω)
  WEBHOOK_URL: 'https://your-domain.pythonanywhere.com/webhook',
  
  // –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  WEBHOOK_SECRET: 'your_secret_key_here',
  
  // ID –ª–∏—Å—Ç–∞ —Å –∞–∫—Ü–∏—è–º–∏
  SHEET_NAME: '–ê–∫—Ü–∏–∏',
  
  // –ù–æ–º–µ—Ä–∞ –∫–æ–ª–æ–Ω–æ–∫ (A=1, B=2, C=3, D=4, E=5, F=6, G=7, H=8)
  COLUMNS: {
    RELEASE_DATE: 1,    // A - –î–∞—Ç–∞ —Ä–µ–ª–∏–∑–∞
    TITLE: 2,           // B - –ù–∞–∑–≤–∞–Ω–∏–µ
    DESCRIPTION: 3,     // C - –û–ø–∏—Å–∞–Ω–∏–µ
    STATUS: 4,          // D - –°—Ç–∞—Ç—É—Å
    START_DATE: 5,      // E - –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞
    END_DATE: 6,        // F - –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
    CONTENT: 7,         // G - –ö–æ–Ω—Ç–µ–Ω—Ç
    ACTION: 8           // H - –î–µ–π—Å—Ç–≤–∏–µ
  }
};
```

### 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (Ctrl+S)
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `setupTrigger` –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ
3. –ù–∞–∂–º–∏—Ç–µ **–í—ã–ø–æ–ª–Ω–∏—Ç—å**
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `createPublishButtons`
5. –ù–∞–∂–º–∏—Ç–µ **–í—ã–ø–æ–ª–Ω–∏—Ç—å**

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –ü–æ—Ç–æ–∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∞–∫—Ü–∏–π:

1. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫** –∑–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∞–∫—Ü–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ
2. **–í –∫–æ–ª–æ–Ω–∫–µ H** –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
3. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫** –Ω–∞–∂–∏–º–∞–µ—Ç "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
4. **Google Apps Script** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "–ê–∫—Ç–∏–≤–Ω–∞"
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞—Ç—É —Ä–µ–ª–∏–∑–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
   - –û—á–∏—â–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –±–æ—Ç
5. **–ë–æ—Ç** –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### –ü–æ—Ç–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–∫—Ü–∏–π:

1. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫** –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∞–∫—Ü–∏–∏
2. **Google Apps Script** –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è** webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
4. **–ë–æ—Ç** —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Google Sheets
python3 -c "from sheets import _load_service_account; print('Google Sheets –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
python3 -c "from auth_service import AuthService; auth = AuthService(); print('AuthService —Ä–∞–±–æ—Ç–∞–µ—Ç!')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ü–∏–π
python3 -c "from promotions_api import get_active_promotions; print('Promotions API —Ä–∞–±–æ—Ç–∞–µ—Ç!')"
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Apps Script

1. –í Apps Script –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `testPublishPromotion`
2. –ù–∞–∂–º–∏—Ç–µ **–í—ã–ø–æ–ª–Ω–∏—Ç—å**
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ webhook —Å–µ—Ä–≤–µ—Ä:
   ```bash
   python3 webhook_handler.py
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ –ª–æ–≥–∞—Ö

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ JSON –∫–ª—é—á–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ Service Account** —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏** –¥–ª—è webhook
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏** Service Account

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞:

```bash
# –í .env –¥–æ–±–∞–≤—å—Ç–µ
WEBHOOK_SECRET=your_very_secure_secret_key_here
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. "Permission denied" –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ Sheets
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Service Account –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: Email –∏–∑ JSON –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–∞–±–ª–∏—Ü—ã

#### 2. "Sheet not found" –æ—à–∏–±–∫–∞
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å SHEET_ID –≤ .env
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: ID –±–µ—Ä–µ—Ç—Å—è –∏–∑ URL —Ç–∞–±–ª–∏—Ü—ã

#### 3. Apps Script –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–∑–¥–∞–Ω –≤ Apps Script
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –¢—Ä–∏–≥–≥–µ—Ä—ã ‚Üí —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä onEdit

#### 4. Webhook –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ POST –∑–∞–ø—Ä–æ—Å—ã

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```bash
# –õ–æ–≥–∏ Google Apps Script
# –í Apps Script: –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚Üí –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

# –õ–æ–≥–∏ webhook —Å–µ—Ä–≤–µ—Ä–∞
tail -f webhook_handler.log

# –õ–æ–≥–∏ –±–æ—Ç–∞
tail -f bot.log
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

1. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–π** –≤ –¥–µ–Ω—å
2. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞—â–µ–Ω–∏–π** –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
3. **–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å –∞–∫—Ü–∏–π** (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã)
4. **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
5. **–û—à–∏–±–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** —Å Google Sheets

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```python
# –í –∫–æ–¥–µ –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
import logging

logger = logging.getLogger(__name__)

def log_metric(metric_name, value):
    logger.info(f"METRIC: {metric_name}={value}")
```

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–ë–∞—Ç—á–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Sheets
3. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
4. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã** –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Google Sheets API

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```python
# –í auth_service.py —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5 –º–∏–Ω—É—Ç
CACHE_TTL_MINUTES = 5
```

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** v3.2  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 9 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ