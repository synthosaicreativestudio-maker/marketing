# üîç –ü–û–õ–ù–´–ô –ê–£–î–ò–¢ MARKETINGBOT
**–î–∞—Ç–∞:** 17 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.0.0  
**–°—Ç–∞—Ç—É—Å:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –û–ë–ù–ê–†–£–ñ–ï–ù–´

## üìä –ö–†–ê–¢–ö–ò–ô –û–ë–ó–û–†

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç–∞—Ç—É—Å | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|---------|-------------|
| **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞** | ‚ùå 50 –æ—à–∏–±–æ–∫ | –í–´–°–û–ö–ê–Ø |
| **–¢–∏–ø–∏–∑–∞—Ü–∏—è** | ‚ùå 15 –æ—à–∏–±–æ–∫ | –°–†–ï–î–ù–Ø–Ø |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | üö® –ö–†–ò–¢–ò–ß–ù–û | –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø |
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | ‚ö†Ô∏è –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã | –í–´–°–û–ö–ê–Ø |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | ‚úÖ –ë–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ | –ù–ò–ó–ö–ê–Ø |
| **–¢–µ—Å—Ç—ã** | ‚úÖ 16/17 –ø—Ä–æ–π–¥–µ–Ω–æ | –ù–ò–ó–ö–ê–Ø |

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

### 1. –•–ê–†–î–ö–û–î –¢–û–ö–ï–ù–ê –ë–û–¢–ê
**–§–∞–π–ª:** `start_bot.sh:9`
```bash
export TELEGRAM_BOT_TOKEN="8232668997:AAHCvWtcjtqw5b5tuYrYwg1lCz0oItjhUEg"
```
**–†–∏—Å–∫:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç–∫—Ä—ã—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–ï–ú–ï–î–õ–ï–ù–ù–û –∑–∞–º–µ–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –∏ —É–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ–¥–∞

### 2. –•–ê–†–î–ö–û–î ADMIN ID
**–§–∞–π–ª:** `start_bot.sh:10`
```bash
export ADMIN_TELEGRAM_ID=284355186
```
**–†–∏—Å–∫:** –í–´–°–û–ö–ò–ô - –∞–¥–º–∏–Ω—Å–∫–∏–π ID –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –∫–æ–¥–µ
**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## ‚ùå –û–®–ò–ë–ö–ò –ö–ê–ß–ï–°–¢–í–ê –ö–û–î–ê

### Ruff (50 –æ—à–∏–±–æ–∫)
- **45 –∏—Å–ø—Ä–∞–≤–∏–º—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (`ruff check . --fix`)
- **W293:** 25 –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
- **I001:** 3 –Ω–µ–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–∞
- **F541:** 1 f-string –±–µ–∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤
- **PTH123:** 1 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `open()` –≤–º–µ—Å—Ç–æ `Path.open()`

### MyPy (15 –æ—à–∏–±–æ–∫ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏)
- **Prometheus –º–µ—Ç—Ä–∏–∫–∏:** –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Ç–∏–ø—ã `_Noop` vs `Counter`
- **Optional —Ç–∏–ø—ã:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ None
- **Subprocess:** –ü—Ä–æ–±–ª–µ–º—ã —Å `Optional[IO[str]]`
- **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `root`

### Bandit (–ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ —Ç–µ—Å—Ç–∞—Ö)
- **B101:** 15 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `assert` –≤ —Ç–µ—Å—Ç–∞—Ö (–Ω–æ—Ä–º–∞)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é `# nosec`

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï –ö–û–ù–§–õ–ò–ö–¢–´

### 1. –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï TELEGRAM –ë–û–¢–û–í
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –±–æ—Ç–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ
- `bot.py` - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π HTTP API –±–æ—Ç
- `plugins/auth.py` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π PTB v21 –±–æ—Ç

**–ö–æ–Ω—Ñ–ª–∏–∫—Ç:** –†–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–µ
```python
# bot.py - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π
class TelegramBot:
    def send_message(self, chat_id, text):
        response = requests.post(...)

# plugins/auth.py - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π  
async def _auth_start(update: Update, context: Any):
    await update.message.reply_text(...)
```

### 2. –°–ú–ï–®–ê–ù–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
- **FastAPI** (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π) + **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –±–æ—Ç**
- **PTB v21** (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π) + **HTTP API** (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)
- **–ü–ª–∞–≥–∏–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –±–æ—Ç–æ–º

### 3. –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–ò
- –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ Telegram API
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üìÅ –ù–ï–ò–°–ü–û–õ–¨–ó–£–ï–ú–´–ï –§–ê–ô–õ–´ –ò –ö–û–î

### –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã:
1. **`launch_bot.py`** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ subprocess
2. **`plugins/`** - –ø–ª–∞–≥–∏–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –±–æ—Ç–æ–º
3. **`scripts/restart_bot.sh`** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º workflow
4. **`cert.pem` / `key.pem`** - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –±–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- **`python-telegram-bot`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–ª–∞–≥–∏–Ω–∞—Ö
- **`rq`** - Redis –∑–∞–¥–∞—á–∏ –Ω–µ –∞–∫—Ç–∏–≤–Ω—ã –±–µ–∑ REDIS_URL

## üîß –ü–†–û–ë–õ–ï–ú–´ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò

### 1. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ —Ñ–∞–π–ª—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `requirements.txt` - —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
- `pyproject.toml` - –¥–∏–∞–ø–∞–∑–æ–Ω—ã –≤–µ—Ä—Å–∏–π
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏—è—Ö

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `.env` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- –•–∞—Ä–¥–∫–æ–¥ –≤ shell —Å–∫—Ä–∏–ø—Ç–∞—Ö

## ‚úÖ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ê–°–ü–ï–ö–¢–´

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- 22 —Ñ–∞–π–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
- API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –•–æ—Ä–æ—à–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- 16/17 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ edge cases

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫
- FastAPI 0.115+
- Python 3.9-3.12 –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- Docker multi-stage build
- Prometheus –º–µ—Ç—Ä–∏–∫–∏

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### –ö–†–ò–¢–ò–ß–ù–û (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):
1. **–ó–∞–º–µ–Ω–∏—Ç—å —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞**
2. **–£–¥–∞–ª–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –∏–∑ `start_bot.sh`**
3. **–î–æ–±–∞–≤–∏—Ç—å `.env` –≤ `.gitignore`**

### –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:
1. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –±–æ—Ç–∞** - –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –ø–æ–¥—Ö–æ–¥
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å 50 –æ—à–∏–±–æ–∫ Ruff** - `ruff check . --fix`
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é MyPy**
4. **–£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã**

### –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:
1. **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ñ–∞–π–ª—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
2. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**

### –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢:
1. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã**
2. **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ç–∏–ø–æ–≤**
3. **–†–∞—Å—à–∏—Ä–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**

## üìà –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –§–∞–∑–∞ 1: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (1 –¥–µ–Ω—å)
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- [ ] –£–¥–∞–ª–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –∏–∑ —Å–∫—Ä–∏–ø—Ç–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –§–∞–∑–∞ 2: –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (2 –¥–Ω—è)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ Ruff
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ MyPy
- [ ] –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã

### –§–∞–∑–∞ 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (3-5 –¥–Ω–µ–π)
- [ ] –í—ã–±—Ä–∞—Ç—å –µ–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –±–æ—Ç—É
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### –§–∞–∑–∞ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1-2 –¥–Ω—è)
- [ ] –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üîç –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

MarketingBot –∏–º–µ–µ—Ç **–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é –±–∞–∑—É** —Å —Ö–æ—Ä–æ—à–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∏ —Ç–µ—Å—Ç–∞–º–∏, –Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** –∏ **–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã**. 

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –ù–ï –ì–û–¢–û–í –ö –ü–†–û–î–ê–ö–®–ï–ù–£

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** –ú–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º production-ready —Ä–µ—à–µ–Ω–∏–µ–º

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∑–∞—Ç–µ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
