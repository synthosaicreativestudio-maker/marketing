#!/bin/bash

# ะกะบัะธะฟั ะดะปั ะพะฑะฝะพะฒะปะตะฝะธั ะฑะพัะฐ ะฝะฐ PythonAnywhere
echo "๐ ะะฑะฝะพะฒะปะตะฝะธะต MarketingBot ะฝะฐ PythonAnywhere..."

# ะะตัะตัะพะดะธะผ ะฒ ะฟะฐะฟะบั ะฟัะพะตะบัะฐ
cd ~/marketing

# ะััะฐะฝะฐะฒะปะธะฒะฐะตะผ ัะตะบััะธะน ะฑะพั
echo "โน๏ธ ะััะฐะฝะพะฒะบะฐ ัะตะบััะตะณะพ ะฑะพัะฐ..."
pkill -f "python.*bot" || echo "ะะพั ะฝะต ะฑัะป ะทะฐะฟััะตะฝ"

# ะะฑะฝะพะฒะปัะตะผ ะบะพะด ะธะท GitHub
echo "๐ฅ ะะฑะฝะพะฒะปะตะฝะธะต ะบะพะดะฐ ะธะท GitHub..."
git fetch origin
git pull origin main

# ะะฑะฝะพะฒะปัะตะผ ะทะฐะฒะธัะธะผะพััะธ
echo "๐ฆ ะะฑะฝะพะฒะปะตะฝะธะต ะทะฐะฒะธัะธะผะพััะตะน..."
pip3.10 install --user -r requirements.txt

# ะะฐะฟััะบะฐะตะผ ะฑะพัะฐ
echo "โถ๏ธ ะะฐะฟััะบ ะพะฑะฝะพะฒะปะตะฝะฝะพะณะพ ะฑะพัะฐ..."
nohup python3.10 bot.py > bot.log 2>&1 &

echo "โ ะะฑะฝะพะฒะปะตะฝะธะต ะทะฐะฒะตััะตะฝะพ!"
echo "๐ ะัะพะฒะตัััะต ะปะพะณะธ: tail -f bot.log"
echo "๐ ะกัะฐััั ะฟัะพัะตััะฐ: ps aux | grep python"
