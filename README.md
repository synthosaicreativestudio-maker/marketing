# Marketing bot — проект

Краткое руководство:

- `docs/` — документация проекта: правила, лог переписки, архитектура, описание функций.
- `tools/log_chat.py` — утилита для добавления записей в `docs/CONVERSATION_LOG.md`.

Документы в `docs/`:

- `RULES.md` — свод ролей и правил.
- `CONVERSATION_LOG.md` — лог переписки.
- `ARCHITECTURE.md` — описание логики бота.
- `FUNCTIONS.md` — шаблоны описания функций.
- `CONTRIBUTING.md` — как вносить вклад.
- `CHANGELOG.md` — журнал изменений (Keep a Changelog).
- `SECURITY.md` — политика безопасности.
- `INSTALLATION.md` — инструкция по установке.
- `CI_CD.md` — рекомендации по CI/CD.
- `API.md` — документация API (шаблон).
- `DATA_SCHEMA.md` — схема данных (шаблон).
- `IMPLEMENTATIONS.md` — лог успешных реализаций (факт-лог).
- `ADR_TEMPLATE.md` — шаблон ADR (архитектурные решения).
- `CODE_OF_CONDUCT.md` — кодекс поведения.
- `ROADMAP.md` — дорожная карта проекта.
- `TESTING.md` — рекомендации по тестированию.
- `RELEASE_PROCESS.md` — процесс релизов.

Использование утилиты логирования:

```bash
python3 tools/log_chat.py "Пользователь" "Текст сообщения"
```

Утилита для фиксации успешных реализаций:

```bash
python3 tools/record_impl.py --title "Краткий заголовок" --summary "Короткое описание" --solution "Краткое описание решения" --status работает --edit
```

Опция `--edit` откроет `docs/IMPLEMENTATIONS.md` в вашем редакторе после добавления записи.

Сохранение зашифрованной копии `.env` (опционально пуш в репозиторий):

```bash
# спросит пароль для шифрования
python3 tools/backup_env.py --out .env.enc --push --remote origin --branch env-backups
```

Скрипт создаст `.env.enc` (зашифрованный файл). Если указан `--push`, он закоммитит и запушит файл в указанную ветку.

Файлы окружения
----------------

Файл `.env` должен храниться только локально и добавлен в `.gitignore`.
В репозитории хранится только шаблон ` .env.example` — скопируйте его в локальный `.env` и заполните значения.

Я удалю `.env` из индекса git (если он был закоммичен) и закоммичу изменения с добавлением `.gitignore`.

После каждой успешной реализации исполнитель добавляет запись в `docs/IMPLEMENTATIONS.md` с описанием решения и статусом (работает/не работает).

Пример использования утилиты:

```bash
python3 tools/log_chat.py "Пользователь" "Текст сообщения"
```

Правила взаимодействия описаны в `docs/RULES.md`.

Запуск бота локально
--------------------

1. Установите зависимости:

```bash
pip install -r requirements.txt
```

2. Создайте `.env` с `TELEGRAM_TOKEN` или экспортируйте переменную окружения.

3. Запустите бота:

```bash
python3 bot.py
```

